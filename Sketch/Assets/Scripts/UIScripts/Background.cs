using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class Background : MonoBehaviour
{
    // Start is called before the first frame update
    Image img;
    int i = 0;
    bool on = false;
    // int state = 0; // 0, 1, 2
    int r, g, b = 0;
    int rup, gup, bup;
    int[] cols = {220,156,124,236,180,144,252,200,164,92,44,0,120,76,28,144,104,56,172,132,80,192,156,104,212,180,124,232,204,144,252,224,164,44,60,0,72,92,28,100,124,56,128,156,80,148,180,104,172,208,124,192,228,144,212,252,164,0,60,0,32,92,32,64,124,64,92,156,92,116,180,116,140,208,140,164,228,164,184,252,184,0,56,20,28,92,52,56,124,80,80,152,108,104,180,132,124,204,156,144,228,180,164,252,200,0,48,44,28,80,76,52,112,104,76,140,132,100,168,156,120,192,180,136,212,204,156,236,224,0,40,68,24,72,100,48,104,132,68,132,160,88,156,184,108,180,208,124,204,232,140,224,252,0,0,0,64,64,64,108,108,108,144,144,144,176,176,176,200,200,200,220,220,220,244,244,244,0,68,68,16,100,100,36,132,132,52,160,160,64,184,184,80,208,208,92,232,232,104,252,252,0,40,112,20,68,132,40,92,152,60,120,172,76,140,188,92,160,204,104,180,220,120,200,236,0,24,132,24,52,152,48,80,172,72,104,192,92,128,208,112,148,224,128,168,236,148,188,252,0,0,136,32,32,156,60,60,176,88,88,192,112,112,208,136,136,224,160,160,236,180,180,252,92,0,120,116,32,140,136,60,160,156,88,176,176,112,192,192,132,208,208,156,220,224,176,236,120,0,72,144,32,96,164,60,120,184,88,140,204,112,160,220,132,180,236,156,196,252,176,212,132,0,20,152,32,48,172,60,76,192,88,104,208,112,124,224,136,148,236,160,168,252,180,188,136,0,0,156,32,28,176,64,56,192,92,80,208,116,104,224,140,124,236,164,144,252,184,164,124,24,0,144,56,28,168,84,56,188,112,80,204,136,104,220,156,124,236,180,144,252,200,164,92,44,0,120,76,28,144,104,56,172,132,80,192,156,104,212,180,124,232,204,144,252,224,164,44,60,0,72,92,28,100,124,56,128,156,80,148,180,104,172,208,124,192,228,144,212,252,164,0,60,0,32,92,32,64,124,64,92,156,92,116,180,116,140,208,140,164,228,164,184,252,184,0,56,20,28,92,52,56,124,80,80,152,108,104,180,132,124,204,156,144,228,180,164,252,200,0,48,44,28,80,76,52,112,104,76,140,132,100,168,156,120,192,180,136,212,204,156,236,224,0,40,68,24,72,100,48,104,132,68,132,160,88,156,184,108,180,208,124,204,232,140,224,252,0,0,0,64,64,64,108,108,108,144,144,144,176,176,176,200,200,200,220,220,220,244,244,244,0,68,68,16,100,100,36,132,132,52,160,160,64,184,184,80,208,208,92,232,232,104,252,252,0,40,112,20,68,132,40,92,152,60,120,172,76,140,188,92,160,204,104,180,220,120,200,236,0,24,132,24,52,152,48,80,172,72,104,192,92,128,208,112,148,224,128,168,236,148,188,252,0,0,136,246,246,246,255,255,255};
    int colIndex = 0;
    int holdDown = 0;

    void Start()
    {
        img = gameObject.GetComponent<Image>();
    }

    // Update is called once per frame
    void Update()
    {
        if(on) {
            if(++i%25 == 0) img.color = getColor();
        }
        
        if(Input.GetKey(KeyCode.W)) {
            holdDown++;
        } else {
            holdDown = 0;
        }

        if(holdDown >= 1000) {
            on = !on;
            if(on == false) {
                img.color = new Color32(255,255,255,0);
            }
            holdDown = 0;
        }
        
    }

    byte ran() {
        return (byte)Random.Range(0, 255);
    }

    Color32 getColor() {
        r = cols[(colIndex) % cols.Length];
        g = cols[(colIndex+1) % cols.Length];
        b = cols[(colIndex+2) % cols.Length];
        colIndex += 3;
        // if(state == 0) {
        //     r = ran();
        //     g = ran();
        //     b = ran();
        //     rup = (r < 150) ? 1 : -1;
        //     gup = (g < 150) ? 1 : -1;
        //     bup = (b < 150) ? 1 : -1;
        // } else {
        //     r += (rup * 5);
        //     g += (gup * 17);
        //     b += (bup * 17);
        // }
        // state++;
        // if(state == 3) state = 0;
        return new Color32((byte)r,(byte)g,(byte)b,200);
    }
}
